targets += bin
targets += bin/with-stack-protector
targets += bin/no-stack-protector
targets += bin/no-stack-protector-foiled
targets += bin/with-aslr

.PHONY: all

all: $(targets)

bin/with-stack-protector: src/with-stack-protector.c | bin
	$(CC) -g $< -fstack-protector-all -o $@

bin/no-stack-protector: src/no-stack-protector.c | bin
	$(CC) -g $< -fno-stack-protector -o $@

bin/no-stack-protector-foiled: src/no-stack-protector.c | bin
	$(CC) -g $< -fstack-protector-all -o $@

bin/with-aslr: src/with-aslr.c | bin
	$(CC) -g $< -fstack-protector-all -o $@

bin:
	mkdir -p $@
